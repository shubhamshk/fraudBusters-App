{"ast":null,"code":"import React,{useRef,useState,useCallback,useEffect}from'react';import'./CameraCapture.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const CameraCapture=_ref=>{let{onCapture,onClose}=_ref;const videoRef=useRef(null);const canvasRef=useRef(null);const[stream,setStream]=useState(null);const[isCapturing,setIsCapturing]=useState(false);const[error,setError]=useState(null);const[isVideoReady,setIsVideoReady]=useState(false);const[devices,setDevices]=useState([]);const[selectedDeviceId,setSelectedDeviceId]=useState(null);// Get available cameras\nconst getDevices=useCallback(async()=>{try{var _videoDevices$;const devices=await navigator.mediaDevices.enumerateDevices();const videoDevices=devices.filter(device=>device.kind==='videoinput');setDevices(videoDevices);// Prefer back camera if available\nconst backCamera=videoDevices.find(device=>device.label.toLowerCase().includes('back')||device.label.toLowerCase().includes('rear')||device.label.toLowerCase().includes('environment'));setSelectedDeviceId(backCamera?backCamera.deviceId:(_videoDevices$=videoDevices[0])===null||_videoDevices$===void 0?void 0:_videoDevices$.deviceId);}catch(err){console.error('Error getting devices:',err);}},[]);// Start camera\nconst startCamera=useCallback(async function(){let deviceId=arguments.length>0&&arguments[0]!==undefined?arguments[0]:selectedDeviceId;try{setError(null);setIsVideoReady(false);// Stop existing stream first\nif(stream){stream.getTracks().forEach(track=>track.stop());}const constraints={video:{width:{ideal:1920,min:640},height:{ideal:1080,min:480},facingMode:deviceId?undefined:{ideal:'environment'},deviceId:deviceId?{exact:deviceId}:undefined},audio:false};const mediaStream=await navigator.mediaDevices.getUserMedia(constraints);if(videoRef.current){videoRef.current.srcObject=mediaStream;// Wait for video to be ready\nconst handleVideoReady=()=>{setIsVideoReady(true);videoRef.current.removeEventListener('loadedmetadata',handleVideoReady);};videoRef.current.addEventListener('loadedmetadata',handleVideoReady);await videoRef.current.play();}setStream(mediaStream);}catch(err){console.error('Error accessing camera:',err);let errorMessage='Unable to access camera. ';if(err.name==='NotAllowedError'){errorMessage+='Camera permission denied. Please allow camera access and try again.';}else if(err.name==='NotFoundError'){errorMessage+='No camera found on this device.';}else if(err.name==='NotReadableError'){errorMessage+='Camera is already in use by another application.';}else{errorMessage+='Please check your camera settings and try again.';}setError(errorMessage);}},[selectedDeviceId,stream]);// Stop camera\nconst stopCamera=useCallback(()=>{if(stream){stream.getTracks().forEach(track=>track.stop());setStream(null);}},[stream]);// Capture photo with enhanced quality\nconst capturePhoto=useCallback(()=>{if(!videoRef.current||!canvasRef.current||!isVideoReady){setError('Camera is not ready. Please wait a moment and try again.');return;}setIsCapturing(true);const video=videoRef.current;const canvas=canvasRef.current;const ctx=canvas.getContext('2d');// Set high-quality canvas dimensions\nconst aspectRatio=video.videoWidth/video.videoHeight;const maxWidth=2048;const maxHeight=2048;let captureWidth=video.videoWidth;let captureHeight=video.videoHeight;// Scale down if too large while maintaining aspect ratio\nif(captureWidth>maxWidth){captureWidth=maxWidth;captureHeight=maxWidth/aspectRatio;}if(captureHeight>maxHeight){captureHeight=maxHeight;captureWidth=maxHeight*aspectRatio;}canvas.width=captureWidth;canvas.height=captureHeight;// Enable image smoothing for better quality\nctx.imageSmoothingEnabled=true;ctx.imageSmoothingQuality='high';// Draw video frame to canvas\nctx.drawImage(video,0,0,captureWidth,captureHeight);// Convert to blob with high quality\ncanvas.toBlob(blob=>{if(blob){// Create a file from the blob with timestamp\nconst timestamp=new Date().toISOString().replace(/[:.]/g,'-');const file=new File([blob],\"certificate-scan-\".concat(timestamp,\".jpg\"),{type:'image/jpeg',lastModified:Date.now()});onCapture(file);stopCamera();onClose();}else{setError('Failed to capture image. Please try again.');}setIsCapturing(false);},'image/jpeg',0.95// Higher quality\n);},[onCapture,onClose,stopCamera,isVideoReady]);// Initialize camera when component mounts\nuseEffect(()=>{const initCamera=async()=>{await getDevices();};initCamera();// Cleanup on unmount\nreturn()=>{stopCamera();};},[getDevices,stopCamera]);// Start camera when device is selected or devices are available\nuseEffect(()=>{if(selectedDeviceId||devices.length>0&&!selectedDeviceId){startCamera(selectedDeviceId);}},[selectedDeviceId,devices.length,startCamera]);const handleClose=()=>{stopCamera();onClose();};return/*#__PURE__*/_jsx(\"div\",{className:\"camera-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"camera-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"camera-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\uD83D\\uDCF7 Scan Certificate\"}),/*#__PURE__*/_jsx(\"button\",{className:\"close-btn\",onClick:handleClose,children:\"\\u2715\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"camera-content\",children:error?/*#__PURE__*/_jsxs(\"div\",{className:\"camera-error\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"error-icon\",children:\"\\uD83D\\uDCF7\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"button\",{onClick:startCamera,className:\"retry-btn\",children:\"Try Again\"})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"camera-view\",children:[/*#__PURE__*/_jsx(\"video\",{ref:videoRef,className:\"camera-video \".concat(isVideoReady?'ready':'loading'),playsInline:true,muted:true,autoPlay:true}),/*#__PURE__*/_jsx(\"canvas\",{ref:canvasRef,style:{display:'none'}}),!isVideoReady&&!error&&/*#__PURE__*/_jsxs(\"div\",{className:\"camera-loading\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"camera-loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Starting camera...\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"camera-overlay-guide\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"scan-area\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"corner top-left\"}),/*#__PURE__*/_jsx(\"div\",{className:\"corner top-right\"}),/*#__PURE__*/_jsx(\"div\",{className:\"corner bottom-left\"}),/*#__PURE__*/_jsx(\"div\",{className:\"corner bottom-right\"}),/*#__PURE__*/_jsx(\"div\",{className:\"scan-text\",children:\"Position certificate within the frame\"})]})})]})}),!error&&/*#__PURE__*/_jsxs(\"div\",{className:\"camera-controls\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"camera-tips\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"\\uD83D\\uDCA1 Tips:\"}),/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:\"Ensure good lighting\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Hold device steady\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Place certificate flat\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Avoid shadows and glare\"}),/*#__PURE__*/_jsx(\"li\",{children:\"Fill the frame with document\"})]}),devices.length>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"camera-selector\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"camera-select\",children:\"Camera:\"}),/*#__PURE__*/_jsx(\"select\",{id:\"camera-select\",value:selectedDeviceId||'',onChange:e=>setSelectedDeviceId(e.target.value),className:\"camera-select\",children:devices.map(device=>/*#__PURE__*/_jsx(\"option\",{value:device.deviceId,children:device.label||\"Camera \".concat(device.deviceId.slice(0,8))},device.deviceId))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"capture-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"capture-btn\",onClick:capturePhoto,disabled:isCapturing||!isVideoReady,children:isCapturing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"capture-spinner\"}),\"Processing...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[\"\\uD83D\\uDCF8 \",isVideoReady?'Capture Certificate':'Camera Starting...']})}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel-btn\",onClick:handleClose,children:\"Cancel\"})]})]})]})});};export default CameraCapture;","map":{"version":3,"names":["React","useRef","useState","useCallback","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","CameraCapture","_ref","onCapture","onClose","videoRef","canvasRef","stream","setStream","isCapturing","setIsCapturing","error","setError","isVideoReady","setIsVideoReady","devices","setDevices","selectedDeviceId","setSelectedDeviceId","getDevices","_videoDevices$","navigator","mediaDevices","enumerateDevices","videoDevices","filter","device","kind","backCamera","find","label","toLowerCase","includes","deviceId","err","console","startCamera","arguments","length","undefined","getTracks","forEach","track","stop","constraints","video","width","ideal","min","height","facingMode","exact","audio","mediaStream","getUserMedia","current","srcObject","handleVideoReady","removeEventListener","addEventListener","play","errorMessage","name","stopCamera","capturePhoto","canvas","ctx","getContext","aspectRatio","videoWidth","videoHeight","maxWidth","maxHeight","captureWidth","captureHeight","imageSmoothingEnabled","imageSmoothingQuality","drawImage","toBlob","blob","timestamp","Date","toISOString","replace","file","File","concat","type","lastModified","now","initCamera","handleClose","className","children","onClick","ref","playsInline","muted","autoPlay","style","display","htmlFor","id","value","onChange","e","target","map","slice","disabled"],"sources":["C:/Users/shubh/projects/file-verification-app/frontend/src/components/CameraCapture.js"],"sourcesContent":["import React, { useRef, useState, useCallback, useEffect } from 'react';\r\nimport './CameraCapture.css';\r\n\r\nconst CameraCapture = ({ onCapture, onClose }) => {\r\n  const videoRef = useRef(null);\r\n  const canvasRef = useRef(null);\r\n  const [stream, setStream] = useState(null);\r\n  const [isCapturing, setIsCapturing] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [isVideoReady, setIsVideoReady] = useState(false);\r\n  const [devices, setDevices] = useState([]);\r\n  const [selectedDeviceId, setSelectedDeviceId] = useState(null);\r\n\r\n  // Get available cameras\r\n  const getDevices = useCallback(async () => {\r\n    try {\r\n      const devices = await navigator.mediaDevices.enumerateDevices();\r\n      const videoDevices = devices.filter(device => device.kind === 'videoinput');\r\n      setDevices(videoDevices);\r\n      \r\n      // Prefer back camera if available\r\n      const backCamera = videoDevices.find(device => \r\n        device.label.toLowerCase().includes('back') || \r\n        device.label.toLowerCase().includes('rear') ||\r\n        device.label.toLowerCase().includes('environment')\r\n      );\r\n      \r\n      setSelectedDeviceId(backCamera ? backCamera.deviceId : videoDevices[0]?.deviceId);\r\n    } catch (err) {\r\n      console.error('Error getting devices:', err);\r\n    }\r\n  }, []);\r\n\r\n  // Start camera\r\n  const startCamera = useCallback(async (deviceId = selectedDeviceId) => {\r\n    try {\r\n      setError(null);\r\n      setIsVideoReady(false);\r\n      \r\n      // Stop existing stream first\r\n      if (stream) {\r\n        stream.getTracks().forEach(track => track.stop());\r\n      }\r\n      \r\n      const constraints = {\r\n        video: {\r\n          width: { ideal: 1920, min: 640 },\r\n          height: { ideal: 1080, min: 480 },\r\n          facingMode: deviceId ? undefined : { ideal: 'environment' },\r\n          deviceId: deviceId ? { exact: deviceId } : undefined\r\n        },\r\n        audio: false\r\n      };\r\n      \r\n      const mediaStream = await navigator.mediaDevices.getUserMedia(constraints);\r\n      \r\n      if (videoRef.current) {\r\n        videoRef.current.srcObject = mediaStream;\r\n        \r\n        // Wait for video to be ready\r\n        const handleVideoReady = () => {\r\n          setIsVideoReady(true);\r\n          videoRef.current.removeEventListener('loadedmetadata', handleVideoReady);\r\n        };\r\n        \r\n        videoRef.current.addEventListener('loadedmetadata', handleVideoReady);\r\n        await videoRef.current.play();\r\n      }\r\n      \r\n      setStream(mediaStream);\r\n    } catch (err) {\r\n      console.error('Error accessing camera:', err);\r\n      let errorMessage = 'Unable to access camera. ';\r\n      \r\n      if (err.name === 'NotAllowedError') {\r\n        errorMessage += 'Camera permission denied. Please allow camera access and try again.';\r\n      } else if (err.name === 'NotFoundError') {\r\n        errorMessage += 'No camera found on this device.';\r\n      } else if (err.name === 'NotReadableError') {\r\n        errorMessage += 'Camera is already in use by another application.';\r\n      } else {\r\n        errorMessage += 'Please check your camera settings and try again.';\r\n      }\r\n      \r\n      setError(errorMessage);\r\n    }\r\n  }, [selectedDeviceId, stream]);\r\n\r\n  // Stop camera\r\n  const stopCamera = useCallback(() => {\r\n    if (stream) {\r\n      stream.getTracks().forEach(track => track.stop());\r\n      setStream(null);\r\n    }\r\n  }, [stream]);\r\n\r\n  // Capture photo with enhanced quality\r\n  const capturePhoto = useCallback(() => {\r\n    if (!videoRef.current || !canvasRef.current || !isVideoReady) {\r\n      setError('Camera is not ready. Please wait a moment and try again.');\r\n      return;\r\n    }\r\n\r\n    setIsCapturing(true);\r\n    const video = videoRef.current;\r\n    const canvas = canvasRef.current;\r\n    const ctx = canvas.getContext('2d');\r\n\r\n    // Set high-quality canvas dimensions\r\n    const aspectRatio = video.videoWidth / video.videoHeight;\r\n    const maxWidth = 2048;\r\n    const maxHeight = 2048;\r\n    \r\n    let captureWidth = video.videoWidth;\r\n    let captureHeight = video.videoHeight;\r\n    \r\n    // Scale down if too large while maintaining aspect ratio\r\n    if (captureWidth > maxWidth) {\r\n      captureWidth = maxWidth;\r\n      captureHeight = maxWidth / aspectRatio;\r\n    }\r\n    \r\n    if (captureHeight > maxHeight) {\r\n      captureHeight = maxHeight;\r\n      captureWidth = maxHeight * aspectRatio;\r\n    }\r\n    \r\n    canvas.width = captureWidth;\r\n    canvas.height = captureHeight;\r\n\r\n    // Enable image smoothing for better quality\r\n    ctx.imageSmoothingEnabled = true;\r\n    ctx.imageSmoothingQuality = 'high';\r\n    \r\n    // Draw video frame to canvas\r\n    ctx.drawImage(video, 0, 0, captureWidth, captureHeight);\r\n\r\n    // Convert to blob with high quality\r\n    canvas.toBlob(\r\n      (blob) => {\r\n        if (blob) {\r\n          // Create a file from the blob with timestamp\r\n          const timestamp = new Date().toISOString().replace(/[:.]/g, '-');\r\n          const file = new File([blob], `certificate-scan-${timestamp}.jpg`, {\r\n            type: 'image/jpeg',\r\n            lastModified: Date.now()\r\n          });\r\n          \r\n          onCapture(file);\r\n          stopCamera();\r\n          onClose();\r\n        } else {\r\n          setError('Failed to capture image. Please try again.');\r\n        }\r\n        setIsCapturing(false);\r\n      },\r\n      'image/jpeg',\r\n      0.95 // Higher quality\r\n    );\r\n  }, [onCapture, onClose, stopCamera, isVideoReady]);\r\n\r\n  // Initialize camera when component mounts\r\n  useEffect(() => {\r\n    const initCamera = async () => {\r\n      await getDevices();\r\n    };\r\n    \r\n    initCamera();\r\n    \r\n    // Cleanup on unmount\r\n    return () => {\r\n      stopCamera();\r\n    };\r\n  }, [getDevices, stopCamera]);\r\n  \r\n  // Start camera when device is selected or devices are available\r\n  useEffect(() => {\r\n    if (selectedDeviceId || (devices.length > 0 && !selectedDeviceId)) {\r\n      startCamera(selectedDeviceId);\r\n    }\r\n  }, [selectedDeviceId, devices.length, startCamera]);\r\n\r\n  const handleClose = () => {\r\n    stopCamera();\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <div className=\"camera-overlay\">\r\n      <div className=\"camera-container\">\r\n        <div className=\"camera-header\">\r\n          <h3>ðŸ“· Scan Certificate</h3>\r\n          <button className=\"close-btn\" onClick={handleClose}>\r\n            âœ•\r\n          </button>\r\n        </div>\r\n        \r\n        <div className=\"camera-content\">\r\n          {error ? (\r\n            <div className=\"camera-error\">\r\n              <div className=\"error-icon\">ðŸ“·</div>\r\n              <p>{error}</p>\r\n              <button onClick={startCamera} className=\"retry-btn\">\r\n                Try Again\r\n              </button>\r\n            </div>\r\n          ) : (\r\n            <div className=\"camera-view\">\r\n              <video\r\n                ref={videoRef}\r\n                className={`camera-video ${isVideoReady ? 'ready' : 'loading'}`}\r\n                playsInline\r\n                muted\r\n                autoPlay\r\n              />\r\n              <canvas ref={canvasRef} style={{ display: 'none' }} />\r\n              \r\n              {!isVideoReady && !error && (\r\n                <div className=\"camera-loading\">\r\n                  <div className=\"camera-loading-spinner\"></div>\r\n                  <p>Starting camera...</p>\r\n                </div>\r\n              )}\r\n              \r\n              {/* Camera overlay with guidelines */}\r\n              <div className=\"camera-overlay-guide\">\r\n                <div className=\"scan-area\">\r\n                  <div className=\"corner top-left\"></div>\r\n                  <div className=\"corner top-right\"></div>\r\n                  <div className=\"corner bottom-left\"></div>\r\n                  <div className=\"corner bottom-right\"></div>\r\n                  <div className=\"scan-text\">\r\n                    Position certificate within the frame\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        {!error && (\r\n          <div className=\"camera-controls\">\r\n            <div className=\"camera-tips\">\r\n              <p>ðŸ’¡ Tips:</p>\r\n              <ul>\r\n                <li>Ensure good lighting</li>\r\n                <li>Hold device steady</li>\r\n                <li>Place certificate flat</li>\r\n                <li>Avoid shadows and glare</li>\r\n                <li>Fill the frame with document</li>\r\n              </ul>\r\n              \r\n              {devices.length > 1 && (\r\n                <div className=\"camera-selector\">\r\n                  <label htmlFor=\"camera-select\">Camera:</label>\r\n                  <select \r\n                    id=\"camera-select\"\r\n                    value={selectedDeviceId || ''}\r\n                    onChange={(e) => setSelectedDeviceId(e.target.value)}\r\n                    className=\"camera-select\"\r\n                  >\r\n                    {devices.map((device) => (\r\n                      <option key={device.deviceId} value={device.deviceId}>\r\n                        {device.label || `Camera ${device.deviceId.slice(0, 8)}`}\r\n                      </option>\r\n                    ))}\r\n                  </select>\r\n                </div>\r\n              )}\r\n            </div>\r\n            \r\n            <div className=\"capture-controls\">\r\n              <button \r\n                className=\"capture-btn\" \r\n                onClick={capturePhoto}\r\n                disabled={isCapturing || !isVideoReady}\r\n              >\r\n                {isCapturing ? (\r\n                  <>\r\n                    <div className=\"capture-spinner\"></div>\r\n                    Processing...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    ðŸ“¸ {isVideoReady ? 'Capture Certificate' : 'Camera Starting...'}\r\n                  </>\r\n                )}\r\n              </button>\r\n              \r\n              <button className=\"cancel-btn\" onClick={handleClose}>\r\n                Cancel\r\n              </button>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CameraCapture;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}