{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./App.css';import FileUpload from'./components/FileUpload';import VerificationResult from'./components/VerificationResult';import Login from'./components/Login';import Register from'./components/Register';import{getCurrentUser,logout}from'./api/auth';import StudentDashboard from\"./components/dashboards/StudentDashboard\";import EmployerDashboard from\"./components/dashboards/EmployerDashboard\";import GovAdminDashboard from\"./components/dashboards/GovAdminDashboard\";import InstitutionDashboard from\"./components/dashboards/InstitutionDashboard\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){// Authentication state\nconst[user,setUser]=useState(null);const[isAuthenticated,setIsAuthenticated]=useState(false);const[authMode,setAuthMode]=useState('login');// 'login' or 'register'\nconst[isLoadingAuth,setIsLoadingAuth]=useState(true);// Analysis state\nconst[currentFile,setCurrentFile]=useState(null);const[verificationResult,setVerificationResult]=useState(null);const[isAnalyzing,setIsAnalyzing]=useState(false);const[currentStep,setCurrentStep]=useState(0);const[analysisSteps,setAnalysisSteps]=useState([]);// Authentication functions\nconst handleAuthSuccess=userData=>{setUser(userData);setIsAuthenticated(true);};const handleLogout=async()=>{try{await logout();setUser(null);setIsAuthenticated(false);}catch(error){console.error('Logout error:',error);// Force logout on error\nsetUser(null);setIsAuthenticated(false);}};const toggleAuthMode=()=>{setAuthMode(authMode==='login'?'register':'login');};// Check for existing session on app load\nuseEffect(()=>{const checkAuth=async()=>{try{const response=await getCurrentUser();setUser(response.user);setIsAuthenticated(true);}catch(error){// User not authenticated, continue to login\nconsole.log('Not authenticated');}finally{setIsLoadingAuth(false);}};checkAuth();},[]);// Note: Analysis functions moved to individual dashboard components\n// Render appropriate dashboard based on user role\nconst renderDashboard=()=>{if(!user||!user.role){return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-screen\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading user data...\"})]})});}switch(user.role){case'STUDENT':return/*#__PURE__*/_jsx(StudentDashboard,{user:user,onLogout:handleLogout});case'EMPLOYER':return/*#__PURE__*/_jsx(EmployerDashboard,{user:user,onLogout:handleLogout});case'INSTITUTION':return/*#__PURE__*/_jsx(InstitutionDashboard,{user:user,onLogout:handleLogout});case'GOV_ADMIN':return/*#__PURE__*/_jsx(GovAdminDashboard,{user:user,onLogout:handleLogout});default:return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"error-container\",style:{padding:'2rem',textAlign:'center'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Invalid user role\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please contact support for assistance.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,style:{padding:'0.5rem 1rem',margin:'1rem'},children:\"Logout\"})]})});}};// Show loading screen while checking authentication\nif(isLoadingAuth){return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-screen\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})]})});}// Show authentication screens if not logged in\nif(!isAuthenticated){return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:authMode==='login'?/*#__PURE__*/_jsx(Login,{onSuccess:handleAuthSuccess,onToggleMode:toggleAuthMode}):/*#__PURE__*/_jsx(Register,{onSuccess:handleAuthSuccess,onToggleMode:toggleAuthMode})});}// Show main app if authenticated - render role-based dashboard\nreturn renderDashboard();}export default App;","map":{"version":3,"names":["React","useState","useEffect","FileUpload","VerificationResult","Login","Register","getCurrentUser","logout","StudentDashboard","EmployerDashboard","GovAdminDashboard","InstitutionDashboard","jsx","_jsx","jsxs","_jsxs","App","user","setUser","isAuthenticated","setIsAuthenticated","authMode","setAuthMode","isLoadingAuth","setIsLoadingAuth","currentFile","setCurrentFile","verificationResult","setVerificationResult","isAnalyzing","setIsAnalyzing","currentStep","setCurrentStep","analysisSteps","setAnalysisSteps","handleAuthSuccess","userData","handleLogout","error","console","toggleAuthMode","checkAuth","response","log","renderDashboard","role","className","children","onLogout","style","padding","textAlign","onClick","margin","onSuccess","onToggleMode"],"sources":["C:/Users/shubh/projects/file-verification-app/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\nimport FileUpload from './components/FileUpload';\nimport VerificationResult from './components/VerificationResult';\nimport Login from './components/Login';\nimport Register from './components/Register';\nimport { getCurrentUser, logout } from './api/auth';\nimport StudentDashboard from \"./components/dashboards/StudentDashboard\"\nimport EmployerDashboard from \"./components/dashboards/EmployerDashboard\"\nimport GovAdminDashboard from \"./components/dashboards/GovAdminDashboard\"\nimport InstitutionDashboard from \"./components/dashboards/InstitutionDashboard\"\n\nfunction App() {\n  // Authentication state\n  const [user, setUser] = useState(null);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [authMode, setAuthMode] = useState('login'); // 'login' or 'register'\n  const [isLoadingAuth, setIsLoadingAuth] = useState(true);\n\n  // Analysis state\n  const [currentFile, setCurrentFile] = useState(null);\n  const [verificationResult, setVerificationResult] = useState(null);\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [currentStep, setCurrentStep] = useState(0);\n  const [analysisSteps, setAnalysisSteps] = useState([]);\n\n  // Authentication functions\n  const handleAuthSuccess = (userData) => {\n    setUser(userData);\n    setIsAuthenticated(true);\n  };\n\n  const handleLogout = async () => {\n    try {\n      await logout();\n      setUser(null);\n      setIsAuthenticated(false);\n    } catch (error) {\n      console.error('Logout error:', error);\n      // Force logout on error\n      setUser(null);\n      setIsAuthenticated(false);\n    }\n  };\n\n  const toggleAuthMode = () => {\n    setAuthMode(authMode === 'login' ? 'register' : 'login');\n  };\n\n  // Check for existing session on app load\n  useEffect(() => {\n    const checkAuth = async () => {\n      try {\n        const response = await getCurrentUser();\n        setUser(response.user);\n        setIsAuthenticated(true);\n      } catch (error) {\n        // User not authenticated, continue to login\n        console.log('Not authenticated');\n      } finally {\n        setIsLoadingAuth(false);\n      }\n    };\n\n    checkAuth();\n  }, []);\n\n  // Note: Analysis functions moved to individual dashboard components\n\n  // Render appropriate dashboard based on user role\n  const renderDashboard = () => {\n    if (!user || !user.role) {\n      return (\n        <div className=\"App\">\n          <div className=\"loading-screen\">\n            <div className=\"loading-spinner\"></div>\n            <p>Loading user data...</p>\n          </div>\n        </div>\n      );\n    }\n\n    switch (user.role) {\n      case 'STUDENT':\n        return <StudentDashboard user={user} onLogout={handleLogout} />;\n      case 'EMPLOYER':\n        return <EmployerDashboard user={user} onLogout={handleLogout} />;\n      case 'INSTITUTION':\n        return <InstitutionDashboard user={user} onLogout={handleLogout} />;\n      case 'GOV_ADMIN':\n        return <GovAdminDashboard user={user} onLogout={handleLogout} />;\n      default:\n        return (\n          <div className=\"App\">\n            <div className=\"error-container\" style={{ padding: '2rem', textAlign: 'center' }}>\n              <h2>Invalid user role</h2>\n              <p>Please contact support for assistance.</p>\n              <button onClick={handleLogout} style={{ padding: '0.5rem 1rem', margin: '1rem' }}>Logout</button>\n            </div>\n          </div>\n        );\n    }\n  };\n\n  // Show loading screen while checking authentication\n  if (isLoadingAuth) {\n    return (\n      <div className=\"App\">\n        <div className=\"loading-screen\">\n          <div className=\"loading-spinner\"></div>\n          <p>Loading...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Show authentication screens if not logged in\n  if (!isAuthenticated) {\n    return (\n      <div className=\"App\">\n        {authMode === 'login' ? (\n          <Login onSuccess={handleAuthSuccess} onToggleMode={toggleAuthMode} />\n        ) : (\n          <Register onSuccess={handleAuthSuccess} onToggleMode={toggleAuthMode} />\n        )}\n      </div>\n    );\n  }\n\n  // Show main app if authenticated - render role-based dashboard\n  return renderDashboard();\n\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}